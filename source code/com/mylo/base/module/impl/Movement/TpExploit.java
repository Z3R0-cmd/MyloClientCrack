/*     */ package com.mylo.base.module.impl.Movement;
/*     */ 
/*     */ import com.darkmagician6.eventapi.EventTarget;
/*     */ import com.mylo.base.Main;
/*     */ import com.mylo.base.events.EventPacket;
/*     */ import com.mylo.base.events.EventRender3d;
/*     */ import com.mylo.base.events.EventUpdate;
/*     */ import com.mylo.base.module.Category;
/*     */ import com.mylo.base.module.Module;
/*     */ import com.mylo.base.utils.PathFind;
/*     */ import com.mylo.base.utils.Renderutils;
/*     */ import java.util.ArrayList;
/*     */ import net.minecraft.client.renderer.GlStateManager;
/*     */ import net.minecraft.network.Packet;
/*     */ import net.minecraft.network.play.client.C03PacketPlayer;
/*     */ import net.minecraft.network.play.server.S08PacketPlayerPosLook;
/*     */ import net.minecraft.network.play.server.S39PacketPlayerAbilities;
/*     */ import net.minecraft.util.BlockPos;
/*     */ import net.minecraft.util.Vec3;
/*     */ import net.minecraft.util.Vec3i;
/*     */ import org.lwjgl.opengl.GL11;
/*     */ 
/*     */ 
/*     */ 
/*     */ public class TpExploit
/*     */   extends Module
/*     */ {
/*  28 */   BlockPos playerPos = null;
/*     */   boolean posFlag = false;
/*     */   boolean abilityFlag = false;
/*  31 */   ArrayList<Vec3> poslist = null;
/*     */   float Pitch;
/*     */   
/*     */   public TpExploit() {
/*  35 */     super("TpExploit", "teleport to your last location on respawn", 0, Category.Movement);
/*     */   }
/*     */   
/*     */   float Yaw;
/*     */   
/*     */   @EventTarget
/*     */   public void onPacket(EventPacket e) {
/*  42 */     if (e.getPacket() instanceof S08PacketPlayerPosLook) {
/*  43 */       S08PacketPlayerPosLook p = (S08PacketPlayerPosLook)e.getPacket();
/*  44 */       this.posFlag = true;
/*  45 */       this.playerPos = this.mc.thePlayer.getPosition();
/*  46 */       this.Pitch = this.mc.thePlayer.rotationPitch;
/*  47 */       this.Yaw = this.mc.thePlayer.rotationYaw;
/*     */     } 
/*  49 */     if (e.getPacket() instanceof S39PacketPlayerAbilities) {
/*  50 */       S39PacketPlayerAbilities p = (S39PacketPlayerAbilities)e.getPacket();
/*  51 */       if (this.mc.thePlayer.capabilities.allowFlying && !p.isAllowFlying()) {
/*  52 */         this.abilityFlag = true;
/*     */       }
/*     */     } 
/*     */   }
/*     */   
/*     */   public void pathToPos(BlockPos startBpos, BlockPos endBpos) {
/*  58 */     Main.NotMan.sendNotification("Teleport", "Teleporting right now to " + endBpos, 5000);
/*  59 */     ArrayList<Vec3> path = PathFind.computePath(this.mc.thePlayer.getPositionVector(), new Vec3((Vec3i)endBpos), 6.0D, false);
/*  60 */     this.poslist = path;
/*  61 */     for (Vec3 vec : path) {
/*  62 */       this.mc.thePlayer.sendQueue.addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(vec.xCoord, vec.yCoord, vec.zCoord, false));
/*     */     }
/*  64 */     this.mc.thePlayer.setPositionAndRotation(endBpos.getX() + 0.5D, (endBpos.getY() + 1), endBpos.getZ() + 0.5D, this.Yaw, this.Pitch);
/*     */   }
/*     */   
/*     */   @EventTarget
/*     */   public void onUpdate(EventUpdate e) {
/*  69 */     if (e.isPre()) {
/*  70 */       if (this.posFlag && this.abilityFlag) {
/*  71 */         this.posFlag = false;
/*  72 */         this.abilityFlag = false;
/*     */         
/*  74 */         if (this.playerPos != null) {
/*  75 */           pathToPos(this.mc.thePlayer.getPosition(), this.playerPos);
/*     */         }
/*     */       } 
/*  78 */       if (this.posFlag && this.mc.thePlayer.ticksExisted > 20) {
/*  79 */         this.posFlag = false;
/*  80 */         this.poslist = new ArrayList<>();
/*     */       } 
/*     */     } 
/*     */   }
/*     */   
/*     */   @EventTarget
/*     */   public void onRender3d(EventRender3d e) {
/*  87 */     GlStateManager.disableDepth();
/*  88 */     if (this.poslist != null) {
/*  89 */       for (int i = 0; i < this.poslist.size() - 1; i++) {
/*  90 */         GlStateManager.pushMatrix();
/*  91 */         Vec3 startPos = this.poslist.get(i);
/*  92 */         Vec3 endPos = this.poslist.get(i + 1);
/*     */ 
/*     */ 
/*     */         
/*  96 */         Renderutils.enableGL2D();
/*  97 */         GL11.glLineWidth(3.0F);
/*  98 */         GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
/*  99 */         GL11.glTranslated(-(this.mc.getRenderManager()).renderPosX, -(this.mc.getRenderManager()).renderPosY, -(this.mc.getRenderManager()).renderPosZ);
/* 100 */         GL11.glBegin(1);
/* 101 */         GL11.glVertex3d(startPos.xCoord, startPos.yCoord, startPos.zCoord);
/* 102 */         GL11.glVertex3d(endPos.xCoord, endPos.yCoord, endPos.zCoord);
/* 103 */         GL11.glEnd();
/* 104 */         Renderutils.disableGL2D();
/*     */         
/* 106 */         GlStateManager.popMatrix();
/* 107 */         GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
/*     */       } 
/*     */     }
/* 110 */     GlStateManager.enableDepth();
/*     */   }
/*     */ 
/*     */   
/*     */   public void onEnable() {
/* 115 */     super.onEnable();
/* 116 */     this.playerPos = null;
/* 117 */     this.poslist = null;
/* 118 */     this.Pitch = 0.0F;
/* 119 */     this.Yaw = 0.0F;
/*     */   }
/*     */ }


/* Location:              /Users/michaelmc/Downloads/MyloClientCrack-main/MyloClient/MyloClient.jar!/com/mylo/base/module/impl/Movement/TpExploit.class
 * Java compiler version: 8 (52.0)
 * JD-Core Version:       1.1.3
 */